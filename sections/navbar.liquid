{% schema %}
{
  "name": "Nena",
  "limit": 1,
  "settings": [
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "select",
      "id": "bg_color",
      "label": "Background color",
      "default": "bg-dark",
      "options": [
        { "value": "bg-primary", "label": "Primary" },
        { "value": "bg-secondary", "label": "Secondary" },
        { "value": "bg-dark", "label": "Dark" },
        { "value": "bg-light", "label": "Light" }
      ]
    },
    {
      "type": "range",
      "id": "bg_opacity",
      "label": "Background opacity",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 100,
      "unit": "%"
    },
    {
      "type": "select",
      "id": "text_color",
      "label": "Text color",
      "default": "text-light",
      "options": [
        { "value": "text-primary", "label": "Primary" },
        { "value": "text-secondary", "label": "Secondary" },
        { "value": "text-dark", "label": "Dark" },
        { "value": "text-light", "label": "Light" }
      ]
    },
    {
      "type": "select",
      "id": "shadow",
      "label": "Shadow",
      "options": [
        { "value": "shadow-sm", "label": "Yes" },
        { "value": "", "label": "No" }
      ],
      "default": "shadow-sm"
    }
  ],
  "blocks": [
    {
      "type": "mobile",
      "name": "Mobile",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo"
        },
        {
          "type": "range",
          "id": "logo_height",
          "label": "Logo height",
          "min": 20,
          "max": 100,
          "step": 2,
          "default": 40
        },
        {
          "type": "link_list",
          "id": "main_menu",
          "label": "Main menu",
          "default": "main-menu"
        },
        {
          "type": "checkbox",
          "id": "show_music_player",
          "label": "Show music player",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "social_icons",
          "label": "Show social icons",
          "default": true
        }
      ]
    },
    {
      "type": "desktop",
      "name": "Desktop",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo"
        },
        {
          "type": "range",
          "id": "logo_height",
          "label": "Logo height",
          "min": 20,
          "max": 100,
          "step": 2,
          "default": 40
        },
        {
          "type": "link_list",
          "id": "main_menu",
          "label": "Main menu",
          "default": "main-menu"
        },
        {
          "type": "checkbox",
          "id": "show_music_player",
          "label": "Show music player",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Singer Navbar"
    }
  ]
}
{% endschema %}

<navbar-wrapper 
  id="navbar-wrapper"
  class="
    {{ section.settings.bg_color }} 
    {{ section.settings.text_color }} 
    {{ section.settings.shadow }}
  "
  style="
    --bs-bg-opacity: {{ section.settings.bg_opacity | append: '%' }};
  ">
  {% for block in section.blocks %}
    {% if block.type == 'mobile' %}
      <nav 
        id="navbar-mobile" 
        class="navbar d-lg-none p-0"
        {{ block.shopify_attributes }}>
        <div class="container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
            <span class="navbar-toggler-icon"></span>
          </button>
          <a class="navbar-brand mx-auto" href="{{ routes.root_url }}">
            {% if block.settings.logo != blank %}
              {{ block.settings.logo | image_url: width: 200 | image_tag:
                class: 'img-fluid',
                width: block.settings.logo_height,
                height: '',
                alt: shop.name
              }}
            {% else %}
              {{ shop.name }}
            {% endif %}
          </a>
          <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Menu</h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                {% for link in linklists[block.settings.main_menu].links %}
                  <li class="nav-item">
                    <a class="nav-link" href="{{ link.url }}">{{ link.title }}</a>
                  </li>
                {% endfor %}
              </ul>
              {% if block.settings.show_music_player %}
                <div class="mt-3">
                  <!-- Add your music player component here -->
                  <p>Music Player Placeholder</p>
                </div>
              {% endif %}
              {% if block.settings.social_icons %}
                <div class="mt-3">
                  {% render 'social-icons' %}
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </nav>
    {% else %}
      <nav 
        id="navbar-desktop" 
        class="navbar navbar-expand-lg d-none d-lg-block p-0"
        {{ block.shopify_attributes }}>
        <div class="container-fluid">
          <a class="navbar-brand" href="{{ routes.root_url }}">
            {% if block.settings.logo != blank %}
              {{ block.settings.logo | image_url: width: 200 | image_tag:
                class: 'img-fluid',
                width: block.settings.logo_height,
                height: '',
                alt: shop.name
              }}
            {% else %}
              {{ shop.name }}
            {% endif %}
          </a>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              {% for link in linklists[block.settings.main_menu].links %}
                <li class="nav-item">
                  <a class="nav-link" href="{{ link.url }}">{{ link.title }}</a>
                </li>
              {% endfor %}
            </ul>
            {% if block.settings.show_music_player %}
              <div class="ms-auto">
                <!-- Add your music player component here -->
                <p>Music Player Placeholder</p>
              </div>
            {% endif %}
          </div>
        </div>
      </nav>
    {% endif %}
  {% endfor %}
</navbar-wrapper>